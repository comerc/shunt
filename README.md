# shunt

telegram-shunt

## Workflow

- Src - исходник
- From - копия (чтобы получать обновления) из Src - без sourceLink; бот маппит альбомы; нельзя ничего удалять - для ReplaceMyselfLinks в копировальщике
- Main - копия (чтобы видеть обновления модератору) из From - есть sourceLink на From; бот маппит альбомы; бот добавляет сообщения с кнопками; исходные сообщения удаляются после модерации вместе со служебными сообщениями; если после удаления происходит изменение во From, то новая копия в Main
- To & Trash - forward через callback из Main по sourceLink на From и по маппингу альбомов
- Dst - копия (без обновлений) из From - без sourceLink; нельзя ничего удалять - для ReplaceMyselfLinks в копировальщике

## Прочие соглашения

- Main & Trash - одни на всех, To & Dst - на каждый From (и Src)
- копирование выполняет внешний копировальщик, бот выполняет только forward через callback
- sourceLink - ссылка в конце сообщения, которую добавляет копировальщик при копировании
- бот должен быть администратором в этих каналах: From, Main, To, Trash
